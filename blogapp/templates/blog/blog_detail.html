{% extends 'base.html' %}
{% load static %}

{% block title %}{{ blog.title }} - Professional Blog{% endblock %}

{% block content %}
<div style="max-width: 1000px; margin: 2rem auto;">
    <!-- Back Button -->
    <div style="margin-bottom: 2rem;">
        <a href="{% url 'blog_list' %}" class="btn btn-secondary">
            ← Back to Blog List
        </a>
    </div>
    
    <!-- Blog Header -->
    <article style="background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 10px 30px var(--shadow); border: 2px solid var(--light-brown);">
        <!-- Blog Image -->
        {% if blog.image %}
            <img src="{{ blog.image.url }}" alt="{{ blog.title }}" style="width: 100%; height: 300px; object-fit: cover;">
        {% else %}
            <div style="width: 100%; height: 300px; background: linear-gradient(135deg, var(--light-brown), var(--cream)); display: flex; align-items: center; justify-content: center; color: var(--dark-brown); font-size: 2rem;">
                📝 {{ blog.category }}
            </div>
        {% endif %}
        
        <!-- Blog Content -->
        <div style="padding: 2rem;">
            <!-- Category Badge -->
            <span class="blog-category" style="margin-bottom: 1rem; display: inline-block;">
                {{ blog.category }}
            </span>
            
            <!-- Title -->
            <h1 style="color: var(--dark-brown); margin-bottom: 1rem; font-size: 2.5rem;">
                {{ blog.title }}
            </h1>
            
            <!-- Meta Information -->
            <div style="color: var(--text-light); margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 2px solid var(--light-brown);">
                <span style="margin-right: 2rem;">
                    👤 By <strong>{{ blog.author.username }}</strong>
                </span>
                <span style="margin-right: 2rem;">
                    📅 {{ blog.created_at|date:"F d, Y" }}
                </span>
                <span>
                    🕒 {{ blog.created_at|date:"g:i A" }}
                </span>
            </div>
            
            <!-- Blog Content -->
            <div style="color: var(--text-dark); line-height: 1.8; font-size: 1.1rem;">
                {{ blog.content|linebreaks }}
            </div>
            
            <!-- Action Buttons -->
            <div style="margin-top: 2rem; padding-top: 2rem; border-top: 2px solid var(--light-brown); text-align: center;">
                <a href="{% url 'blog_list' %}" class="btn btn-primary" style="margin-right: 1rem;">
                    📚 Read More Blogs
                </a>
                {% if user.is_authenticated %}
                    <button class="btn btn-secondary" onclick="sharePost()">
                        🔗 Share Post
                    </button>
                {% endif %}
            </div>
        </div>
    </article>
</div>

<script>
function sharePost() {
    if (navigator.share) {
        navigator.share({
            title: '{{ blog.title }}',
            text: '{{ blog.content|truncatewords:20 }}',
            url: window.location.href
        });
    } else {
        // Fallback for browsers that don't support Web Share API
        navigator.clipboard.writeText(window.location.href);
        alert('Post URL copied to clipboard!');
    }
}
</script>
{% endblock %}